#!/bin/bash -e
# This script is used to `stackato ssh` into a named container, but also
# preserves ssh ForwardAgent logic.

if [[ -z "$1" ]]; then
    echo "Stackato app name is required"
    exit 1
fi

grep ForwardAgent ~/.ssh/config > /dev/null || cat <<EOT
You probably want this in your ~/.ssh/config:

Host *
    ForwardAgent yes

...or else the repos you check out on your PairUp instance will have a hard
time "push"ing like you're used to.

(Going ahead, anyway.)
EOT

bash -c "$(stackato ssh --dry-run $1)"
